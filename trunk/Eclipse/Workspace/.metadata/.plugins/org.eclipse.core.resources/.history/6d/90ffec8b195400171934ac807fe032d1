package ch.mitdom.compresstutorial;

import javax.swing.SwingWorker;

/**
 * Der DecompressorWorker dient dazu, dass der Dekompressionsvorgang in einem
 * seperaten Thread läuft und somit das GUI während der Laufzeit geupdatet werden kann.
 * Die Klasse leitet von SwingWorker ab.
 */
public class DecompressorWorker extends SwingWorker {
	private DecompressorGui gui;
	private IDecompressor decompressor;
	
	/**
	 * Der Konstruktor erwartet ein GUI vom Typ DecompressorGui und einen Decompressor
	 * @param gui GUI vom Typ DecompressorGui
	 * @param usedDecompressor Decompressor vom Typ IDecompressor
	 */
	public DecompressorWorker(DecompressorGui gui, IDecompressor usedDecompressor){
		this.gui = gui;
		this.decompressor = usedDecompressor;
	}
	
	/**
	 * Methode wird aufgerufen, wenn execute() auf einer Instanz des Worker aufgerufen wird.
	 * Es wird auf dem Decompressor die Methode decompress() aufgerufen. Wurde alles erledigt,
	 * wird der Button auf erledigt gesetzt, sonst auf Fehler.
	 */
	@Override
	protected Object doInBackground() throws Exception {
		if(decompressor.decompress(gui)){
			gui.setBtnExecute(true);
		}
		
		else{
			gui.setBtnExecute(false);
		}
		return null;
	}
	
	protected void updateProcess(int progress, String filename, int length){
		gui.setProgress(progress, filename, length);
	}
}
